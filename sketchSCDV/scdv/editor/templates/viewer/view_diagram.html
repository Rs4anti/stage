{% extends "base.html" %}
{% block title %}{{ diagram_name }}{% endblock %}

{% block content %}
<div class="container py-4">
  <h3 class="mb-3">Diagramma: {{ diagram_name }}</h3>
  <div id="canvas" style="height: 600px; border: 1px solid #ccc;"></div>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://unpkg.com/bpmn-js@18.3.1/dist/bpmn-viewer.development.js"></script>
<script>
  const viewer = new BpmnJS({ container: '#canvas' });

  viewer.importXML(`{{ diagram_xml|safe }}`)
    .then(() => viewer.get('canvas').zoom('fit-viewport'))
    .catch(err => console.error('Errore caricamento BPMN:', err));
</script>
{% endblock %}
