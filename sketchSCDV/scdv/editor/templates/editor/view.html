{% extends "base.html" %}
{% load static %}

{% block title %}Supply Chain Data View{% endblock %}

{% block content %}
<div class="container-fluid d-flex flex-column">
  <div class="row bg-white shadow-sm p-2">
    <div class="col d-flex justify-content-between align-items-center">
      <h5 class="mb-0">Supply Chain Data View editor</h5>
      <div class="d-flex gap-2">
        <a href="{% url 'homepage' %}" class="btn btn-outline-primary btn-m">
        <i class="bi bi-house-door"></i> Home
        </a>

      <button class="btn btn-success btn-m" id="save-button1">
        <i class="bi bi-floppy"></i> Save
      </button>

      <button class="btn btn-secondary btn-m" id="reset-button">
        <i class="bi bi-arrow-counterclockwise"></i> Reset
      </button>
      </div>

    </div>
  </div>

  <div class="row flex-grow-1">
    <aside class="col-2 bg-white shadow-sm p-3 overflow-auto">
  <h6 class="fw-bold mb-3">Available Services</h6>

  <div class="accordion" id="serviceAccordion">
    <!-- Atomic -->
    <div class="accordion-item">
      <h2 class="accordion-header" id="headingAtomic">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAtomic">
          Atomic Services
        </button>
      </h2>
      <div id="collapseAtomic" class="accordion-collapse collapse" data-bs-parent="#serviceAccordion">
        <ul class="list-group list-group-flush" id="atomicServiceList"></ul>
      </div>
    </div>

    <!-- CPPS -->
    <div class="accordion-item">
      <h2 class="accordion-header" id="headingCPPS">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCPPS">
          CPPS Services
        </button>
      </h2>
      <div id="collapseCPPS" class="accordion-collapse collapse" data-bs-parent="#serviceAccordion">
        <ul class="list-group list-group-flush" id="cppsServiceList"></ul>
      </div>
    </div>

    <!-- CPPN -->
    <div class="accordion-item">
      <h2 class="accordion-header" id="headingCPPN">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCPPN">
          CPPN Services
        </button>
      </h2>
      <div id="collapseCPPN" class="accordion-collapse collapse" data-bs-parent="#serviceAccordion">
        <ul class="list-group list-group-flush" id="cppnServiceList"></ul>
      </div>
    </div>
  </div>
</aside>


    <main class="col-10 p-3">
      <div id="canvas"></div>
    </main>
  </div>

  <footer class="bg-white shadow-sm p-3">
    <h5 class="fw-bold">Details</h5>
    <div class="details-section mt-3">
      <h6>Input</h6>
      <ul id="input-list"></ul>

      <h6>Output</h6>
      <ul id="output-list"></ul>

      <div id="extra-details" class="mt-3"></div>
    </div>
  </footer>
</div>

{% include "partials/modal_atomic_service.html" %}
{% include "partials/modal_cppn_cpps_services.html" %}
{% endblock %}

{% block extra_js %}
  <script src="https://unpkg.com/bpmn-js@18.3.1/dist/bpmn-modeler.development.js"></script>
  <script src="{% static 'js/custom-moddle.js' %}"></script>
  <script src="{% static 'js/atomic_modal_handler.js' %}"></script>
  <script src="{% static 'js/group_modal_handler.js' %}"></script>
  <script type="module" src="{% static 'js/editor.js' %}"></script>
{% endblock %}
